version: '2.1'
orbs:
  sam: circleci/aws-sam-serverless@3.0
jobs:
  build_app:
    executor: sam/default
    steps:
      - checkout
      - sam/install:
          context: aws-credentials-context
          parameters:
            aws-access-key-id:
              default: $AWS_ACCESS_KEY_ID_DEV
            aws-secret-access-key:
              default: $AWS_SECRET_ACCESS_KEY_DEV
      - run: sam build
workflows:
  my-workflow:
    jobs:
      - build_app
