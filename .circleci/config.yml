version: '2.1'

orbs:
  aws-cli: circleci/aws-cli@3.1

jobs:
  aws-cli-amplify:
    executor: aws-cli/default
    steps:
      - checkout
      - aws-cli/setup:
          profile-name: default
      - run: |
          set -e
          sudo npm install -g @aws-amplify/cli --unsafe-perm=true
          npx create-react-app amplify-app
          cd amplify-app
          amplify init -y

workflows:
  aws-cli:
    jobs:
      - aws-cli-amplify:
          context: aws-credentials-context-dev