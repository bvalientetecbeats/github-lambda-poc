version: '2.1'
orbs:
  sam: circleci/aws-sam-serverless@3.0
jobs:
  build_app:
    parameters:
      aws-access-key-id:
        type: env_var_name
        default: $AWS_ACCESS_KEY_ID_DEV
      aws-secret-access-key:
        type: env_var_name
        default: $AWS_SECRET_ACCESS_KEY_DEV
    executor: sam/default
    context: aws-credentials-context
    steps:
      - checkout      
      - sam/install
      - run: sam build
workflows:
  my-workflow:
    jobs:
      - build_app

